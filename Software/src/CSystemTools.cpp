//////////////////////////////////////////////////////////////////////////////
//! @file 	CSystemTools.cpp
//! @date	Created on: 08.04.2011
//! @author	falk
//////////////////////////////////////////////////////////////////////////////

#include "CSystemTools.h"
#include <cstdio>

//////////////////////////////////////////////////////////////////////////////

namespace RGBLightControl {

  //////////////////////////////////////////////////////////////////////////////

  //////////////////////////////////////////////////////////////////////////
  //! This class function executes the system command oCmd and returns its
  //! output.
  //////////////////////////////////////////////////////////////////////////

  std::string	CSystemTools::GetCommandOutput(std::string oCmd)
  {
    std::string 	strResult("");
    char 			acBuffer[256];

    while(1)
      {
	FILE* fPipe 	= popen(oCmd.c_str(), "r");

	if(!fPipe)
	  {
	    break;
	  }

	while(!feof(fPipe))
	  {
	    if(fgets(acBuffer, 256, fPipe))
	      {
		strResult += acBuffer;
	      }
	  }

	pclose(fPipe);
	break;
      }

    return strResult;
  }


  //////////////////////////////////////////////////////////////////////////////

} // namespace RGBLightControl

//////////////////////////////////////////////////////////////////////////////


